Options -Indexes

ErrorDocument 404 /holding.php

RewriteEngine on

# Original HTTPS redirect (for direct/non-proxied setups)
RewriteCond %{SERVER_PORT} 80
RewriteCond %{HTTP_HOST} ^cookery-corner\.co.uk$ [OR]
RewriteCond %{HTTP_HOST} ^www\.cookery-corner\.co.uk$
RewriteRule ^(.*)$ https://cookery-corner.co.uk/$1 [R,L]

# HTTPS redirect for Cloudflare/proxy (checks X-Forwarded-Proto header)
#RewriteCond %{HTTP:X-Forwarded-Proto} !https
#RewriteCond %{HTTP_HOST} ^cookery-corner\.co.uk$ [OR]
#RewriteCond %{HTTP_HOST} ^www\.cookery-corner\.co.uk$
#RewriteRule ^(.*)$ https://cookery-corner.co.uk/$1 [R=301,L]


RewriteRule ^sitemap\.xml/?$ sitemap.php
RewriteRule ^passwordreset$ includes/reset_request.php
RewriteRule ^passwordchange$ includes/reset_validate.php
RewriteRule ^login$ includes/user_authenticate.php
RewriteRule ^logout$ includes/public_logout.php

RewriteRule ^test/([^/]+) testshow.php?slug=$1
RewriteRule ^blog/([^/]+) blog.php?post-slug=$1
RewriteRule ^liveblog/([^/]+) liveblog.php?post-slug=$1
RewriteRule ^recipe/([^/]+) recipepost.php?post-slug=$1
RewriteRule ^author/([^/]+) authorposts.php?post-slug=$1 [L,QSA]
RewriteRule ^ingredient/([^/]+) ingredientposts.php?post-slug=$1 [L,QSA]
RewriteRule ^servings/([^/]+) servesposts.php?post-slug=$1 [L,QSA]
RewriteRule ^complexity/([^/]+) complexityposts.php?post-slug=$1 [L,QSA]
RewriteRule ^category/([^/]+) rec_categoryposts.php?post-slug=$1 [L,QSA]
RewriteRule ^cuisine/([^/]+) cuisineposts.php?post-slug=$1 [L,QSA]
RewriteRule ^reviews/([^/]+) reviewposts.php?post-slug=$1
RewriteRule ^search/([^/]+) search.php?search=$1 [L,QSA]
RewriteRule ^recipes recipes.php [L,QSA]
RewriteRule ^index.php$ / [L,R=301]
